- name: Bootstrap the Kubernetes Cluster
  hosts: all
  become: true
  gather_facts: true
  vars_files:
    - vars/tls.yml
    - vars/apt.yml
    - vars/lb.yml
    - vars/k8s.yml
    - vars/etcd.yml
  environment:
    KUBECONFIG: /vagrant/share/admin.yml
  roles:
    - prerequisites
    - haproxy
    - tls-ca
    - tls
    - kubeconfig
    - encryption
    - etcd
    - k8s
    - worker
    - coredns
    - cilium
