- name: Bootstrap Kubernetes worker nodes
  hosts: node1:node2
  become: true
  gather_facts: false
  tasks:
    - name: Import role bootstrap
      ansible.builtin.include_role:
        name: bootstrap
    - name: Import tls role
      ansible.builtin.include_role:
        name: tls
    - name: Import kubeconfig role
      ansible.builtin.include_role:
        name: kubeconfig
      vars:
        apiserver_ip: "{{ hostvars[inventory_hostname].ansible_facts.all_ipv6_addresses[-1] }}"
        is_controlplane: true
    - name: Import etcd role
      ansible.builtin.include_role:
        name: etcd
